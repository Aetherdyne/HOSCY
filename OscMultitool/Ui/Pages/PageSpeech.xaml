<Page x:Class="Hoscy.Ui.Pages.PageSpeech"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:Hoscy"
      xmlns:ui="clr-namespace:Hoscy.Ui"
      mc:Ignorable="d" 
      d:DesignHeight="430" d:DesignWidth="689"
      Title="PageSpeech">

    <ScrollViewer Margin="16,8,8,8">
        <StackPanel>
            <StackPanel HorizontalAlignment="Left">
                <WrapPanel>
                    <Label Content="Speech Recognition" Foreground="White" FontSize="30" FontFamily="Microsoft YaHei UI" FontWeight="Bold"/>
                    <Button x:Name="buttonStartStop" Content="Start" Margin="16,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Center" Click="Button_StartStop" Background="{x:Null}" BorderBrush="White" Foreground="White" FontFamily="Microsoft YaHei UI" FontSize="18" Width="52.6266666666667"/>
                </WrapPanel>

                <!-- Recognizer Control -->
                <StackPanel>
                    <WrapPanel>
                        <Label Content="Recognizer Control" Foreground="White" FontSize="24" FontFamily="Microsoft YaHei UI" FontWeight="Bold"/>
                        <Button Content="Mute" Margin="8,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Center" Click="Button_Mute" Background="{x:Null}" BorderBrush="White" Foreground="White" FontFamily="Microsoft YaHei UI" FontSize="18" Width="57.6"/>
                    </WrapPanel>

                    <StackPanel Margin="8,4,0,0">
                        <CheckBox x:Name="speechUseTts" Content="Send over TTS" Foreground="White" IsChecked="{Binding Speech.UseTts, Source={x:Static local:Config.Data}}" BorderBrush="White" FontFamily="Microsoft YaHei UI" FontSize="18"/>
                        <CheckBox x:Name="speechUseTextbox" Content="Send over textbox" Margin="0,4,0,0" Foreground="White" IsChecked="{Binding Speech.UseTextbox, Source={x:Static local:Config.Data}}" BorderBrush="White" FontFamily="Microsoft YaHei UI" FontSize="18"/>
                        <CheckBox x:Name="speechStartUnmuted" Content="Start microphone unmuted" Margin="0,4,0,0" Foreground="White" IsChecked="{Binding Speech.StartUnmuted, Source={x:Static local:Config.Data}}" BorderBrush="White" FontFamily="Microsoft YaHei UI" FontSize="18"/>
                        <CheckBox x:Name="speechMuteOnVrcMute" Content="Mute microphone on VRC mute" Margin="0,4,0,0" Foreground="White" IsChecked="{Binding Speech.MuteOnVrcMute, Source={x:Static local:Config.Data}}" BorderBrush="White" FontFamily="Microsoft YaHei UI" FontSize="18"/>
                    </StackPanel>
                </StackPanel>

                <!-- Commands & Filters -->
                <StackPanel Margin="0,16,0,0">
                    <Label Content="Commands + Filters" Foreground="White" FontSize="24" FontFamily="Microsoft YaHei UI" FontWeight="Bold"/>

                    <StackPanel Margin="8,4,0,0">
                        <WrapPanel Margin="0,0,32,0">
                            <Button Content="Shortcuts" Click="Button_OpenShortcuts" FontSize="18" FontFamily="Microsoft YaHei UI" Background="{x:Null}" BorderBrush="White" Foreground="White" Width="93.6566666666667"/>
                            <Button Content="Replacements" Margin="16,0,0,0" Click="Button_OpenReplacements" Background="{x:Null}" BorderBrush="White" Foreground="White" FontFamily="Microsoft YaHei UI" FontSize="18" Width="133"/>
                            <Button Content="Noise Filter" Margin="16,0,0,0" Click="Button_OpenNoiseFilter" Background="{x:Null}" BorderBrush="White" Foreground="White" FontFamily="Microsoft YaHei UI" FontSize="18" Width="109.676666666667"/>
                        </WrapPanel>
                        <CheckBox x:Name="speechToLower" Content="Ignore caps for list checks" Margin="0,8,0,0" Foreground="White" IsChecked="{Binding Speech.IgnoreCaps, Source={x:Static local:Config.Data}}" BorderBrush="White" Background="White" FontFamily="Microsoft YaHei UI" FontSize="18"/>

                        <WrapPanel Margin="0,4,0,0">
                            <TextBox x:Name="mediaKeyword" HorizontalAlignment="Left" TextWrapping="NoWrap" Text="{Binding Speech.MediaControlKeyword, Source={x:Static local:Config.Data}}" VerticalAlignment="Center" Width="120" FontFamily="Microsoft YaHei UI" FontSize="18" Background="#00000000" Foreground="White" BorderBrush="White"/>
                            <Label Content="Media control keyword" Foreground="White" FontSize="18" FontFamily="Microsoft YaHei UI"/>
                        </WrapPanel>
                    </StackPanel>
                </StackPanel>

                <!-- Recognizer Settings -->
                <StackPanel Margin="0,16,0,0">
                    <WrapPanel>
                        <Label Content="Recognizer Options" Foreground="White" FontSize="24" FontFamily="Microsoft YaHei UI" FontWeight="Bold"/>
                        <ComboBox x:Name="recognizerSelector" VerticalAlignment="Center" Margin="8,0,0,0" HorizontalAlignment="Left" Width="200" FontFamily="Microsoft YaHei UI" FontSize="14" SelectionChanged="RecognizerSelector_SelectionChanged"/>
                    </WrapPanel>

                    <StackPanel Margin="8,4,0,0">
                        <!-- Microphone Select -->
                        <StackPanel x:Name="optionsMic">
                            <Label Content="Microphone" Foreground="White" FontSize="18" FontFamily="Microsoft YaHei UI" FontWeight="Bold"/>
                            <ComboBox x:Name="speechMicrophoneBox" Margin="8,0,0,0" HorizontalAlignment="Left" Width="240" SelectionChanged="SpeechMicrophoneBox_SelectionChanged" FontSize="14" FontFamily="Microsoft YaHei UI" BorderBrush="White"/>
                        </StackPanel>

                        <!-- Vosk Options -->
                        <StackPanel x:Name="optionsVosk" Margin="0,8,0,0">
                            <Label Content="Vosk Options" Foreground="White" FontSize="18" FontFamily="Microsoft YaHei UI" FontWeight="Bold"/>
                            <StackPanel Margin="8,0,0,0">
                                <StackPanel>
                                    <WrapPanel>
                                        <TextBlock VerticalAlignment="Center" TextWrapping="Wrap" Text="Filepath" Foreground="White" FontSize="18"  FontFamily="Microsoft YaHei UI"/>
                                        <Button Content="+" Margin="4,0,0,0" VerticalAlignment="Center" Click="Button_BrowseVoskModel" FontSize="14" FontFamily="Microsoft YaHei UI" Height="22" FontWeight="Bold" Background="{x:Null}" BorderBrush="White" Foreground="White"/>
                                    </WrapPanel>
                                    <TextBox x:Name="speechVoskPath" Margin="0,4,32,0" TextWrapping="NoWrap" Text="{Binding Speech.VoskModelPath, Source={x:Static local:Config.Data}}" FontFamily="Microsoft YaHei UI" FontSize="18" Background="#00000000" Foreground="White" BorderBrush="White"/>
                                </StackPanel>

                                <WrapPanel Margin="0,4,0,0">
                                    <TextBox x:Name="speechVoskTimeout" VerticalAlignment="Center" TextWrapping="NoWrap" Width="160" Background="{x:Null}" BorderBrush="White" Foreground="White" FontFamily="Microsoft YaHei UI" FontSize="18">
                                        <TextBox.Text>
                                            <Binding Source="{x:Static local:Config.Data}" Path="Speech.VoskTimeout" UpdateSourceTrigger="PropertyChanged">
                                                <Binding.ValidationRules>
                                                    <ui:FloatValidationRule Min="0.5" Max="30"/>
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox.Text>
                                    </TextBox>
                                    <Label Content="Recording timeout (s)" Foreground="White" FontSize="18" FontFamily="Microsoft YaHei UI"/>
                                </WrapPanel>
                            </StackPanel>
                        </StackPanel>

                        <!-- Windows Options -->
                        <StackPanel x:Name="optionsWin" Margin="0,8,0,0">
                            <Label Content="Windows recognizer" Foreground="White" FontSize="18" FontFamily="Microsoft YaHei UI" FontWeight="Bold"/>
                            <ComboBox x:Name="speechWindowsRecognizerBox" Margin="8,0,0,0" HorizontalAlignment="Left" Width="240" SelectionChanged="SpeechWindowsRecognizerBox_SelectionChanged" FontFamily="Microsoft YaHei UI" FontSize="14" BorderBrush="White"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>

                <!-- Manual Input -->
                <StackPanel Margin="0,16,0,0">
                    <Label Content="Manual Input" Foreground="White" FontSize="24" FontFamily="Microsoft YaHei UI" FontWeight="Bold"/>

                    <StackPanel Margin="8,4,0,0">
                        <CheckBox x:Name="inputTriggerReplace" Content="Trigger replacements" Foreground="White" IsChecked="{Binding Input.TriggerReplace, Source={x:Static local:Config.Data}}" BorderBrush="White" FontFamily="Microsoft YaHei UI" FontSize="18"/>
                        <CheckBox x:Name="inputTriggerShortcuts" Content="Trigger shortcuts" Margin="0,4,0,0" Foreground="White" IsChecked="{Binding Input.TriggerCommands, Source={x:Static local:Config.Data}}" BorderBrush="White" FontFamily="Microsoft YaHei UI" FontSize="18"/>
                        <CheckBox x:Name="inputIgnoreCaps" Content="Ignore caps for list checks" Margin="0,4,0,0" Foreground="White" IsChecked="{Binding Input.IgnoreCaps, Source={x:Static local:Config.Data}}" BorderBrush="White" FontFamily="Microsoft YaHei UI" FontSize="18"/>
                        <CheckBox x:Name="inputAllowTranslation" Content="Allow translation" Margin="0,4,0,0" Foreground="White" IsChecked="{Binding Input.AllowTranslation, Source={x:Static local:Config.Data}}" BorderBrush="White" FontFamily="Microsoft YaHei UI" FontSize="18"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>
